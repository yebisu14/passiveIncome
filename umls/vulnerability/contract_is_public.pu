@startuml contract_is_public

title Contract is public.
hide footbox

Actor Attacker as user
participant Contract as contract
participant DMM as dmm
participant Device as device

== Attacking ==

note over user, contract
!!!IMPORTANT!!!
Anyone can see content on contract.
endnote

user -> contract: attack()
contract --> user: pair(uuid, movieAddress)


== Veryfing ==

user -> dmm: requestURL(uuid, movieAddress)
activate user
activate dmm

    dmm -> contract: result=isBroadcastable(movieAddress)
    activate contract
    contract --> dmm: valid
    deactivate contract

    dmm -> contract: result=checkReciept(uuid, movieAddress)
    activate contract
    contract --> dmm: valid
    deactivate contract

    dmm -> dmm: URL = resolve(movieAddress, URL)
deactivate dmm 

dmm --> user: URL
deactivate user


@enduml